(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08413d80"],{"5d67":function(t,e,s){"use strict";(function(t){var n=s("be0a"),a=s("cc64"),r=(s("ba49"),s("39dd"),s("f433"),s("e186"),s("7736")),i=s("c24f");e["a"]={data:function(){return{msg:"",showPopover:!1,showfriendsPopup:!1,showAction:!0,queryUserList:[],actions:[{text:"发起群聊",icon:"chat",type:1},{text:"添加朋友",icon:"friends",type:2},{text:"扫一扫",icon:"photograph",type:3},{text:"收付款",icon:"gold-coin",type:4}],searchKey:"",code:"",list:[],scoketIo:null,usersId:[]}},computed:Object(a["a"])({},Object(r["b"])(["userInfo"])),mounted:function(){this.getMyfriends()},methods:{selectPopover:function(t,e){switch(t.type){case 2:this.showfriendsPopup=!0;break;default:break}},closePopupFun:function(){this.code="",this.queryUserList=[],this.getMyfriends()},onSearch:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.code){e.next=3;break}return t.$toast.fail("请输入茴信号"),e.abrupt("return");case 3:return e.prev=3,e.next=6,Object(i["e"])({code:t.code});case 6:s=e.sent,t.queryUserList=s.data,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](3),t.queryUserList=e.t0.data,t.$toast.fail(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))()},handlerAdd:function(t){var e=this;this.$dialog.confirm({title:"温馨提示",message:"确定要添加为好友吗?"}).then((function(){Object(i["a"])({friend_id:t._id}).then((function(s){e.$toast.success("添加成功"),t.isfriend=1})).catch((function(t){e.$toast.fail(t.message)}))})).catch((function(){}))},getMyfriends:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i["b"])();case 3:s=e.sent,t.addeventlisteners(),t.usersId=JSON.parse(localStorage.getItem("usersId")),alert(JSON.stringify(t.usersId)),null!=t.usersId?(s.data.forEach((function(e){t.usersId.forEach((function(t){e._id==t?e.isZaixian=1:e.isZaixian=0}))})),setTimeout((function(){t.list=s.data}),3e3)):t.list=s.data,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$toast.fail(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},toWechatPage:function(t){this.$router.push("/wechatPage/"+t._id)},addeventlisteners:function(){var e=this;t.scoketIo.on("users",(function(t){var s=[];for(var n in t)s.push(n);localStorage.setItem("usersId",JSON.stringify(s)),e.usersId=JSON.parse(localStorage.getItem("usersId")),e.list.forEach((function(t){e.usersId.forEach((function(e){t._id==e?t.isZaixian=1:t.isZaixian=0}))}))}))}}}}).call(this,s("2409"))},"729f":function(t,e,s){"use strict";s("a600")},"7abe":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"index-container"},[s("van-sticky",[s("van-nav-bar",{attrs:{title:"茴信(24)"},scopedSlots:t._u([{key:"right",fn:function(){return[s("van-popover",{attrs:{offset:[16,8],placement:"bottom-end",theme:"dark",trigger:"click",actions:t.actions},on:{select:t.selectPopover},scopedSlots:t._u([{key:"reference",fn:function(){return[s("van-icon",{attrs:{name:"add-o",size:"22",color:"#333"}})]},proxy:!0}]),model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:"showPopover"}})]},proxy:!0}])})],1),s("van-search",{attrs:{placeholder:"请输入搜素关键字"},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),s("div",{staticClass:"cell"},[s("ul",t._l(t.list,(function(e,n){return s("li",{key:n,on:{click:function(s){return t.toWechatPage(e)}}},[s("div",{staticClass:"left"},[s("van-image",{staticClass:"avatar",attrs:{fit:"cover",src:e.avatar}}),s("div",{staticClass:"status",class:1==e.isZaixian?"status2":""})],1),s("div",{staticClass:"right"},[s("div",{staticClass:"top"},[s("span",[t._v(t._s(e.nickname))]),s("span",[t._v("下午4:12")])]),s("div",{staticClass:"bottom"},[t._v(" 你的账单年度提醒来了，在公司呢，晚上我给你拿回去吧！ ")])])])})),0)]),s("van-popup",{staticClass:"friendsPopup",style:{width:"100%",height:"100%"},attrs:{position:"right"},on:{close:t.closePopupFun},model:{value:t.showfriendsPopup,callback:function(e){t.showfriendsPopup=e},expression:"showfriendsPopup"}},[s("van-nav-bar",{attrs:{title:"添加好友","left-arrow":""},on:{"click-left":function(e){t.showfriendsPopup=!1}}}),s("van-search",{attrs:{"show-action":t.showAction,placeholder:"茴信号/手机号"},scopedSlots:t._u([{key:"action",fn:function(){return[s("div",{on:{click:t.onSearch}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),s("p",{staticClass:"myCode"},[t._v("我的茴信号："+t._s(t.userInfo.huixinCode)+" "),s("van-image",{staticClass:"codeImge",attrs:{fit:"cover",src:"http://erkong.ybc365.com/8b08f202112301954281167.png"}})],1),s("div",{staticClass:"list"},t._l(t.queryUserList,(function(e,n){return s("van-cell",{key:n,attrs:{center:""},scopedSlots:t._u([{key:"icon",fn:function(){return[s("van-image",{staticClass:"searchImage",attrs:{fit:"cover",src:e.avatar}})]},proxy:!0},{key:"right-icon",fn:function(){return[0==e.isfriend?s("van-icon",{staticClass:"plus",attrs:{name:"plus",size:"18"},on:{click:function(s){return t.handlerAdd(e)}}}):t._e(),1==e.isfriend?s("van-icon",{staticClass:"plus",attrs:{name:"chat-o",size:"22"}}):t._e()]},proxy:!0},{key:"title",fn:function(){return[s("span",[t._v(t._s(e.nickname))])]},proxy:!0},{key:"label",fn:function(){return[s("span",[s("van-icon",{attrs:{name:"location"}}),t._v("中国大陆 ")],1)]},proxy:!0}],null,!0)})})),1)],1)],1)},a=[],r=s("5d67"),i=r["a"],o=(s("729f"),s("cba8")),c=Object(o["a"])(i,n,a,!1,null,"8c25bbb0",null);e["default"]=c.exports},a600:function(t,e,s){}}]);